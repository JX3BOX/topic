{"version":3,"sources":["webpack:///./src/pages/bashufengyun/Index.vue?bde1","webpack:///src/pages/bashufengyun/Index.vue","webpack:///./src/pages/bashufengyun/Index.vue?6005","webpack:///./src/pages/bashufengyun/Index.vue","webpack:///./src/pages/bashufengyun/Index.vue?41f0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","mobile","on","handleTouchstart","handleTouchend","attrs","mobileHeight","model","value","callback","$$v","sliderIndex","expression","_l","index","key","style","background","ref","mouseWheelHandle","item","class","height","imgLen","k","childBackground","staticRenderFns","name","data","current","isScrolling","deltaY","startTime","startX","startY","computed","mobileImg","arr","mobileList","list","methods","i","backgroundImage","next","pre","move","setTimeout","directToMove","scrollHeight","console","scrollPage","event","evt","direction","created","mounted","document","ev","passive","component"],"mappings":"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","file":"js/chunk-5f06a14e.59a4f394.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-index\"},[(!_vm.mobile)?_c('div',{ref:\"fullPage\",staticClass:\"m-bashufengyun\",style:(_vm.height)},[_c('div',{ref:\"fullPageContainer\",staticClass:\"fullPageContainer\",on:{\"mousewheel\":_vm.mouseWheelHandle,\"DOMMouseScroll\":_vm.mouseWheelHandle}},[_vm._l((6),function(item){return [(item == 1 || item == 6)?_c('div',{key:item,staticClass:\"section\",class:(\"section\" + item),style:([_vm.background(item), _vm.height])}):_c('el-carousel',{key:(\"\" + item),attrs:{\"arrow\":\"always\",\"autoplay\":false,\"loop\":false,\"height\":\"800px\"}},_vm._l((_vm.imgLen[item]),function(k){return _c('el-carousel-item',{key:k,staticClass:\"child\",style:(_vm.childBackground(item, k))})}),1)]})],2)]):_c('div',{on:{\"touchstart\":_vm.handleTouchstart,\"touchend\":_vm.handleTouchend}},[_c('slider',{attrs:{\"height\":_vm.mobileHeight,\"autoplay\":false,\"animation\":\"fade\",\"indicators\":false},model:{value:(_vm.sliderIndex),callback:function ($$v) {_vm.sliderIndex=$$v},expression:\"sliderIndex\"}},_vm._l((_vm.mobileList),function(index){return _c('slider-item',{key:index,staticClass:\"child\",style:(_vm.background(index))})}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-index\">\n        <div class=\"m-bashufengyun\" ref=\"fullPage\" :style=\"height\" v-if=\"!mobile\">\n            <div\n                class=\"fullPageContainer\"\n                ref=\"fullPageContainer\"\n                @mousewheel=\"mouseWheelHandle\"\n                @DOMMouseScroll=\"mouseWheelHandle\"\n            >\n                <template v-for=\"item in 6\">\n                    <div\n                        class=\"section\"\n                        :class=\"`section${item}`\"\n                        :style=\"[background(item), height]\"\n                        v-if=\"item == 1 || item == 6\"\n                        :key=\"item\"\n                    ></div>\n                    <el-carousel arrow=\"always\" :autoplay=\"false\" :loop=\"false\" :key=\"`${item}`\" v-else height=\"800px\">\n                        <el-carousel-item\n                            class=\"child\"\n                            v-for=\"k in imgLen[item]\"\n                            :key=\"k\"\n                            :style=\"childBackground(item, k)\"\n                        >\n                        </el-carousel-item>\n                    </el-carousel>\n                </template>\n            </div>\n        </div>\n        \n        <div v-else @touchstart=\"handleTouchstart\" @touchend=\"handleTouchend\">\n            <slider :height=\"mobileHeight\" :autoplay=\"false\" animation=\"fade\" :indicators=\"false\" v-model=\"sliderIndex\">\n                <slider-item class=\"child\" v-for=\"index in mobileList\" :key=\"index\" :style=\"background(index)\">\n                </slider-item>\n            </slider>\n        </div>\n    </div>\n</template>\n<script>\nexport default {\n    name: \"Index\",\n    data() {\n        return {\n            current: 1,\n            isScrolling: false,\n            deltaY: 0,\n            mobile: false,\n            imgLen: {\n                2: 3,\n                3: 5,\n                4: 4,\n                5: 6,\n            },\n            mobileHeight: \"\",\n            sliderIndex: 0,\n            startTime: \"\",\n            startX: \"\",\n            startY: \"\",\n        };\n    },\n    computed: {\n        height() {\n            return this.current == 1 ? { height: \"1066px\" } : { height: \"800px\" };\n        },\n        mobileImg() {\n            let arr = [];\n            for (let index = 1; index < 7; index++) {\n                if (index == 1 || index == 6) {\n                    arr.push(index);\n                } else {\n                    for (let k = 0; k < this.imgLen[index]; k++) {\n                        arr.push(`${index}_0${k + 1}`);\n                    }\n                }\n            }\n            return arr;\n        },\n        mobileList() {\n            let list = [];\n            for (let i = 1; i < 7; i++) {\n                if (i == 1 || i == 6) {\n                    list.push(i + \"\");\n                } else {\n                    for (let k = 0; k < this.imgLen[i]; k++) {\n                        list.push(i + \"_0\" + (k + 1));\n                    }\n                }\n            }\n            return list;\n        },\n    },\n    methods: {\n        background(i) {\n            return { backgroundImage: `url(https://img.jx3box.com/topic/bashufengyun/home_0${i}.png)` };\n        },\n        childBackground(i, k) {\n            return { backgroundImage: `url(https://img.jx3box.com/topic/bashufengyun/home_0${i}_0${k}.png)` };\n        },\n        // 往下切换\n        next() {\n            let len = 6; // 页面的个数\n            if (this.current + 1 <= len) {\n                this.current += 1;\n                this.move(this.current);\n            }\n        },\n        // 往上切换\n        pre() {\n            if (this.current - 1 > 0) {\n                this.current -= 1;\n                this.move(this.current);\n            }\n        },\n        // 移动\n        move(index) {\n            this.isScrolling = true;\n            this.directToMove(index);\n            setTimeout(() => {\n                //这里的动画是1s执行完，使用setTimeout延迟1s后解锁\n                this.isScrolling = false;\n            }, 1010);\n        },\n        // 滚动\n        directToMove(index) {\n            const section1H = 800;\n            let height = this.$refs[\"fullPage\"].clientHeight;\n            let scrollPage = this.$refs[\"fullPageContainer\"];\n            let scrollHeight;\n            scrollHeight =\n                index == 1 ? -(index - 1) * height + \"px\" : -(index - 1) * height - (section1H - height) + \"px\";\n            console.log(scrollHeight);\n            scrollPage.style.transform = `translateY(${scrollHeight})`;\n            this.current = index;\n        },\n        // 鼠标移动\n        mouseWheelHandle(event) {\n            let evt = event || window.event;\n            if (evt.stopPropagation) {\n                evt.stopPropagation();\n            } else {\n                evt.returnValue = false;\n            }\n            if (this.isScrolling) return false;\n            let e = event.originalEvent || event;\n            this.deltaY = e.deltaY || e.detail;\n            if (this.deltaY > 0) {\n                this.next();\n            } else if (this.deltaY < 0) {\n                this.pre();\n            }\n        },\n        //屏幕滑动\n        //手指按下屏幕\n        handleTouchstart(event) {\n            this.startTime = Date.now();\n            this.startX = event.changedTouches[0].clientX;\n            this.startY = event.changedTouches[0].clientY;\n        },\n        //手指离开屏幕\n        handleTouchend(event) {\n            const endTime = Date.now();\n            const endX = event.changedTouches[0].clientX;\n            const endY = event.changedTouches[0].clientY;\n            //判断按下的时长\n            if (endTime - this.startTime > 2000) {\n                return;\n            }\n            //滑动的方向\n            let direction = \"\";\n            //先判断用户滑动的距离，是否合法，合法:判断滑动的方向 注意 距离要加上绝对值\n            if (Math.abs(endY - this.startY) > 10) {\n                // Math.abs(endX - this.startX) > 10\n                //滑动方向\n                if (Math.abs(endX - this.startX) > 100) {\n                    // Math.abs(endY - this.startY) > 30\n                    // console.log( \"y方向偏移太多，不让你滑了\")\n                    return;\n                } else {\n                    direction = endY - this.startY > 0 ? \"right\" : \"left\";\n                    // direction = endX - this.startX > 0 ? \"right\" : \"left\";\n                }\n            } else {\n                return;\n            }\n            //用户做了合法的滑动操作\n            if (direction === \"left\") {\n                if (this.sliderIndex + 1 === this.mobileList.length) {\n                    this.sliderIndex = 0;\n                    return;\n                } else {\n                    this.sliderIndex++;\n                }\n            }\n            if (direction === \"right\") {\n                if (this.sliderIndex === 0) {\n                    this.sliderIndex = this.mobileList.length;\n                    return;\n                } else {\n                    this.sliderIndex--;\n                }\n            }\n        },\n    },\n    created() {\n        const width = document.documentElement.clientWidth;\n        const height = document.documentElement.clientHeight;\n        if (width < height) {\n            this.mobile = true;\n            this.mobileHeight = width + \"px\";\n        }\n    },\n    mounted() {\n        document.addEventListener(\n            \"touchmove\",\n            function (ev) {\n                ev.preventDefault();\n            },\n            { passive: false }\n        );\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../../assets/css/bashufengyun/index.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=6f507cce&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}