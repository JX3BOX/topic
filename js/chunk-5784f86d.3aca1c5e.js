(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5784f86d"],{"0d76":function(t,s,e){"use strict";e.d(s,"d",(function(){return i})),e.d(s,"c",(function(){return n})),e.d(s,"b",(function(){return c})),e.d(s,"a",(function(){return o}));e("99af");var a=e("41cb");function i(t){return Object(a["a"])({mute:!0}).get("/api/cms/topic",{params:{type:t,all:1,status:1}})}function n(){return Object(a["e"])().get("/api/team/role-bind-token")}function o(){return Object(a["e"])().get("/api/team/my-game-roles?nopage")}function c(t,s){return Object(a["e"])().post("/api/team/website/events/".concat(t,"/collect-rewards"),s)}},"992a":function(t,s,e){t.exports=e.p+"img/jb2.d07ed785.png"},"9e23":function(t,s,e){},ab83:function(t,s,e){"use strict";e("9e23")},d0ad:function(t,s,e){"use strict";e.r(s);e("b0c0");var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"m-index"},[t._m(0),s("div",{staticClass:"m-logo"},[s("div",{staticClass:"u-box"},[t._m(1),s("div",{staticClass:"u-info"},[s("div",{staticClass:"u-avatar-box"},[s("Avatar",{staticClass:"u-avatar",attrs:{uid:t.userInfo.uid,url:t.userInfo.avatar_origin}}),s("div",{staticClass:"u-name"},[t._v(t._s(t.userInfo.name||"未知"))])],1),t.isLogin?s("div",{staticClass:"u-btn",on:{click:t.getHonorShow}},[t._v("绑定角色领取称号")]):t._e()])])]),s("el-dialog",{attrs:{visible:t.showDialog,"custom-class":"m-dialog","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"destroy-on-close":""},on:{"update:visible":function(s){t.showDialog=s}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-dialog-box"},[s("div",{staticClass:"m-dialog-close",attrs:{title:"取消"},on:{click:function(s){t.showDialog=!1}}},[s("i",{staticClass:"el-icon-close"})]),s("div",{staticClass:"m-dialog-content"},[1==t.step?s("div",{staticClass:"u-common u-step1"},[s("Avatar",{staticClass:"u-avatar",attrs:{uid:t.userInfo.uid,url:t.userInfo.avatar_origin}}),s("div",{staticClass:"u-desc"},[t._v("绑定任意一个服务器的【正太七秀】角色即可领取限定称号。")]),s("div",{staticClass:"u-btn-box"},[s("div",{staticClass:"u-btn",on:{click:t.bindRole}},[t._v("绑定角色")]),s("div",{staticClass:"u-btn",on:{click:t.getHonor}},[t._v("领取称号")])])],1):t._e(),2==t.step?s("div",{staticClass:"u-common u-step2"},[s("div",{staticClass:"u-title"},[t._v("绑定令牌")]),s("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.token,expression:"token",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-frame",attrs:{title:"点击复制"}},[s("i",{staticClass:"el-icon-document-copy"}),t._v(" "+t._s(t.token)+" ")]),s("div",{staticClass:"u-tips"},[t._v(" ( 令牌10分钟内有效，超时请 "),s("el-button",{staticClass:"u-refresh",attrs:{type:"text",title:"刷新"},on:{click:t.getToken}},[t._v("点击此处")]),t._v(" 刷新 ) ")],1),s("div",{staticClass:"u-plug"},[t._v(" 打开【茗伊插件集】-【团队】-【团队平台】"),s("br"),t._v(" 在【角色认证】行，点击按钮【点击绑定】并【填入上方密钥】 ")]),s("div",{staticClass:"u-btn-box"},[s("div",{staticClass:"u-btn",on:{click:function(s){t.step--}}},[t._v("上一步")]),s("div",{staticClass:"u-btn",on:{click:t.getHonor}},[t._v("我已绑定，领取称号")])])]):t._e(),3==t.step?s("div",{staticClass:"u-common u-step3"},[s("div",{staticClass:"u-title"},[t._v("领取称号")]),s("div",{staticClass:"u-role"},[s("el-select",{attrs:{placeholder:"请选择","popper-class":"u-role-select"},model:{value:t.role,callback:function(s){t.role=s},expression:"role"}},t._l(t.roles,(function(e){return s("el-option",{key:e.ID,attrs:{label:e.name,value:e.server}},[s("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.server))])])})),1)],1),s("div",{staticClass:"u-btn-box"},[s("div",{staticClass:"u-btn",on:{click:t.honorSubmit}},[t._v("领取称号")])])]):t._e()])])])],1)},i=[function(){var t=this,s=t._self._c;return s("a",{staticClass:"m-jb",attrs:{target:"_blank",href:"/"}},[s("img",{attrs:{src:e("992a"),alt:"魔盒"}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"u-video"},[s("iframe",{attrs:{src:"//player.bilibili.com/player.html?aid=865435138&bvid=BV1n54y1u7bu&cid=1037931815&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}})])}],n=(e("4de4"),e("d3b7"),e("0d76")),o=e("c9d2"),c={name:"Index",props:[],components:{},data:function(){return{userInfo:o["a"].getInfo(),showDialog:!1,step:1,loading:!1,token:"",roles:[],role:"",isLogin:o["a"].isLogin()}},directives:{animate:{inserted:function(t,s){s.addClass=function(){var e=t.getBoundingClientRect(),a=e.top,i=document.documentElement.clientHeight||document.body.clientHeight;a<i&&(-1==t.className.indexOf(s.value)&&(t.className=s.value+" "+t.className),s.addClass&&window.removeEventListener("scroll",s.addClass))},window.addEventListener("scroll",s.addClass,!0),s.addClass()},unbind:function(t,s){s.addClass&&window.removeEventListener("scroll",s.addClass)}}},computed:{},watch:{},methods:{init:function(){var t=this;Object(n["a"])().then((function(s){var e;t.roles=(null===(e=s.data.data.list)||void 0===e?void 0:e.filter((function(t){return 5==t.body_type&&4==t.mount&&0==t.custom})))||[]}))},getToken:function(){var t=this;this.loading=!0,Object(n["c"])().then((function(s){t.token=s.data.data.token})).finally((function(){t.loading=!1}))},onCopy:function(t){this.$notify({title:"复制成功",message:t.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})},hanldMask:function(t){var s=-t.clientX/150,e=-t.clientY/150;this.$refs.mark&&(this.$refs.mark.style.backgroundPositionX=s+"px",this.$refs.mark.style.backgroundPositionY=e+"px")},getHonorShow:function(){this.step=1,this.showDialog=!0},bindRole:function(){this.step=2,this.getToken()},getHonor:function(){this.step=3},honorSubmit:function(){var t=this;Object(n["b"])("2023yaoxiu",{server:this.role}).then((function(s){t.$confirm("领取成功，是否前往装扮?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.showDialog=!1,window.open("/dashboard/honor","_blank")})).catch((function(){t.showDialog=!1}))}))}},filters:{},created:function(){},mounted:function(){this.init(),window.addEventListener("mousemove",this.hanldMask)}},l=c,r=(e("ab83"),e("2877")),u=Object(r["a"])(l,a,i,!1,null,null,null);s["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5784f86d.3aca1c5e.js.map